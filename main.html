<!doctype html>
<html class="no-js">
        <head>
                <meta charset="utf-8">
                <meta http-equiv="X-UA-Compatible" content="IE=edge">
                <meta name="description" content="">
                <meta name="keywords" content="">
                <meta name="viewport"
                content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
                <title>Hello Amaze UI</title>

                <!-- Set render engine for 360 browser -->
                <meta name="renderer" content="webkit">

                <!-- No Baidu Siteapp-->
                <meta http-equiv="Cache-Control" content="no-siteapp"/>

                <link rel="icon" type="image/png" href="assets/i/favicon.png">

                <!-- Add to homescreen for Chrome on Android -->
                <meta name="mobile-web-app-capable" content="yes">
                <link rel="icon" sizes="192x192" href="assets/i/app-icon72x72@2x.png">

                <!-- Add to homescreen for Safari on iOS -->
                <meta name="apple-mobile-web-app-capable" content="yes">
                <meta name="apple-mobile-web-app-status-bar-style" content="black">
                <meta name="apple-mobile-web-app-title" content="Amaze UI"/>
                <link rel="apple-touch-icon-precomposed" href="assets/i/app-icon72x72@2x.png">

                <!-- Tile icon for Win8 (144x144 + tile color) -->
                <meta name="msapplication-TileImage" content="assets/i/app-icon72x72@2x.png">
                <meta name="msapplication-TileColor" content="#0e90d2">

                <link rel="stylesheet" href="http://cdn.amazeui.org/amazeui/2.4.2/css/amazeui.min.css">
        </head>
        <body>
                <h1> IEEE Class 选课指南 </h1>
                <h2> 必须修读以下课程</h2>
                <h3> 公共课程 </h3>
                <button type="button" class="am-btn am-btn-primary">思想道德修养与法律基础</button>
                <button type="button" class="am-btn am-btn-primary">中国近现代史纲要</button>
                <button type="button" class="am-btn am-btn-primary">马克思主义基本原理</button>
                <button type="button" class="am-btn am-btn-primary">"毛泽东思想和中国特色</button>
                <button type="button" class="am-btn am-btn-primary">社会主义理论体系概论"</button>
                <button type="button" class="am-btn am-btn-primary">军事理论</button>
                <button type="button" class="am-btn am-btn-primary">大学基础英语(1)</button>
                <button type="button" class="am-btn am-btn-primary">大学基础英语(2)</button>
                <button type="button" class="am-btn am-btn-primary">大学基础英语(3)或通过水平考</button>
                <button type="button" class="am-btn am-btn-primary">大学基础英语(4)或通过第二次水平考</button>
                <button type="button" class="am-btn am-btn-primary">体育(1)</button>
                <button type="button" class="am-btn am-btn-primary">体育(2)</button>
                <button type="button" class="am-btn am-btn-primary">体育(3)</button>
                <button type="button" class="am-btn am-btn-primary">体育(4)</button>
                <button type="button" class="am-btn am-btn-primary">通识教育实践</button>

                <h3> 专业课  </h3>
                <button type="button" class="am-btn am-btn-secondary">数学分析(C类)(1)</button>
                <button type="button" class="am-btn am-btn-secondary">数学分析(C类)(2)</button>
                <button type="button" class="am-btn am-btn-secondary">线性代数(B类)</button>
                <button type="button" class="am-btn am-btn-secondary">大学物理(A类)(1)</button>
                <button type="button" class="am-btn am-btn-secondary">大学物理(A类)(2)</button>
                <button type="button" class="am-btn am-btn-secondary">计算导论</button>
                <button type="button" class="am-btn am-btn-secondary">程序设计</button>
                <button type="button" class="am-btn am-btn-secondary">离散数学(A类)</button>
                <button type="button" class="am-btn am-btn-secondary">概率论与随机过程</button>

                <h2> 以下电工导三选二 </h2>
                <button type="button" class="am-btn am-btn-secondary">电类工程导论(A类)</button>
                <button type="button" class="am-btn am-btn-secondary">电类工程导论(B类)</button>
                <button type="button" class="am-btn am-btn-secondary">电类工程导论(C类)</button>
                <hr />
                <h2> 复杂的选修部分 </h2>

                <div class="am-g">
                        <div data-am-sticky="{animation: 'slide-top'}">
                                <button id="info" class="am-btn am-btn-success am-btn-block"> 这里显示当前选修课的情况:D </button>
                        </div>
                        <div class="am-u-sm-4">
                                <h3> 选课指南 </h3>
                                <blockquote>
                                        直接点选所需要的专业课，系统会自动选择所有需要的基础课。
                                        格式：<code>课名(学分@推荐学期)</code>
                                </blockquote>

                                <h4> 规则 </h4>
                                <blockquote>
                                        <dl>
                                                <dt>主修模式(2+1或3+0) </dt>
                                                <dd> 主修须完成3个专业方向(至少2个方向属于同一专业，即2+1模式或3+0模式)的课程要求  </dd>
                                                <dt> 副修模式(2+2或2+1+2) </dt>
                                                <dd> 副修须完成同一专业（非主修专业）的2个专业方向的课程要求（即2+2模式或2+1+2模式），若有副修，专业方向课程至少须修读24学分。 </dd>
                                        </dl>
                                </blockquote>

                                <h4>当前选修课程列表</h4>
                                <dl>
                                        <dt> 第1学期 </dt>
                                        <dd>
                                                <ul id="semester1">
                                                </ul>
                                        </dd>
                                        <dt> 第2学期 </dt>
                                        <dd>
                                                <ul id="semester2">
                                                </ul>
                                        </dd>
                                        <dt> 第3学期 </dt>
                                        <dd>
                                                <ul id="semester3">
                                                </ul>
                                        </dd>
                                        <dt> 第4学期 </dt>
                                        <dd>
                                                <ul id="semester4">
                                                </ul>
                                        </dd>
                                        <dt> 第5学期 </dt>
                                        <dd>
                                                <ul id="semester5">
                                                </ul>
                                        </dd>
                                        <dt> 第6学期 </dt>
                                        <dd>
                                                <ul id="semester6">
                                                </ul>
                                        </dd>
                                        <dt> 第7学期 </dt>
                                        <dd>
                                                <ul id="semester7">
                                                </ul>
                                        </dd>
                                </dl>
                                <p> 当前选修总学分：<span id="creditSum">0</span> </p>




                        </div>
                        <div class="am-u-sm-8" id="optionalClass">
                                <h3> 选修课列表 </h3>

                                <div class="am-panel-group" id="optionalClassContainer">
                                        <div class="am-panel am-panel-default">
                                                <div class="am-panel-hd">
                                                        <h4 class="am-panel-title" data-am-collapse="{ target: '#lyjcxxk'}">领域基础限选课 </h4>
                                                </div>
                                                <div id="lyjcxxk" class="am-panel-collapse am-in">
                                                        <div class="am-panel-bd">
                                                                <blockquote>
                                                                        主修模式至少选4门，副修模式至少5门。
                                                                        点击下面的课程会自动选中这些课程，所以<mark> 一般不需要手动点选 </mark>
                                                                </blockquote>
                                                                <button id="dlydzx" type="button" class="am-btn am-btn-default" data-am-button>电路与电子学(5@3)</button>
                                                                <button id="dcnl" type="button" class="am-btn am-btn-default" data-am-button>电磁能量(4@4)</button>
                                                                <button id="xhyxt" type="button" class="am-btn am-btn-default" data-am-button>信号与系统（含复变函数）(4@4)</button>
                                                                <button id="jsjzc" type="button" class="am-btn am-btn-default" data-am-button>计算机组成(4@4)</button>
                                                                <button id="rjgc" type="button" class="am-btn am-btn-default" data-am-button>软件工程(4@4)</button>
                                                                <button id="sjjg" type="button" class="am-btn am-btn-default" data-am-button>数据结构(4@4)</button>
                                                        </div>
                                                </div>
                                        </div>

                                        <div class="am-panel am-panel-default">
                                                <div class="am-panel-hd">
                                                        <h4 class="am-panel-title" data-am-collapse="{target: '#xkjcxxk'}">学科基础限选课 </h4>
                                                </div>
                                                <div id="xkjcxxk" class="am-panel-collapse am-in">
                                                        <div class="am-panel-bd">
                                                                <blockquote>
                                                                        主修模式至少3门，副修模式至少4门。
                                                                        这些课程依赖于上面的领域基础限选课，被下面的专业方向课程所依赖，因此<mark> 一般也不需要自己选择 </mark>。
                                                                </blockquote>
                                                                <button id="txyl" type="button" class="am-btn am-btn-default" data-am-button>通信原理(4@5)</button>
                                                                <button id="dcxyy" type="button" class="am-btn am-btn-default" data-am-button>电磁学应用(4@5)</button>
                                                                <button id="jsjxtgc" type="button" class="am-btn am-btn-default" data-am-button>计算机系统工程(4@5)</button>
                                                                <button id="rgzn" type="button" class="am-btn am-btn-default" data-am-button>人工智能(4@5)</button>
                                                                <button id="sfsjyfx" type="button" class="am-btn am-btn-default" data-am-button>算法设计与分析(4@5)</button>
                                                                <button id="kzll" type="button" class="am-btn am-btn-default" alt="IEEE电气方向必修，其他方向学生选修" data-am-button>控制理论(4@5)</button>
                                                                <button id="dlxtjc" type="button" class="am-btn am-btn-default" data-am-button>电力系统基础(4@5)</button>
                                                                <button id="dldzjs" type="button" class="am-btn am-btn-default" data-am-button>电力电子技术(4@5)</button>
                                                                <button id="txylb" type="button" class="am-btn am-btn-default" data-am-button>通信原理(B类)(2@7)</button>
                                                        </div>
                                                </div>
                                                <div class="am-panel am-panel-default">
                                                        <div class="am-panel-hd">
                                                                <h4 class="am-panel-title" data-am-collapse="{target: '#zyk'}">专业课 </h4>
                                                        </div>
                                                        <div id="zyk" class="am-panel-collapse am-collapse am-in">
                                                                <div class="am-panel-bd">

                                                                        <div class="am-panel-group" id="accordion">
                                                                                <div class="am-panel am-panel-default">
                                                                                        <div class="am-panel-hd">
                                                                                                <h5 class="am-panel-title" data-am-collapse="{parent: '#accordion', target: '#dq'}">
                                                                                                        电气工程与自动化
                                                                                                </h5>
                                                                                        </div>
                                                                                        <div id="dq" class="am-panel-collapse am-collapse am-in">
                                                                                                <div class="am-panel-bd">
                                                                                                        <blockquote>
                                                                                                                本专业原有的3个方向已经合并，因此选择本专业并完成下列要求视作同时完成了3个方向
                                                                                                        </blockquote>

                                                                                                        <h5>以下课程必修</h5>
                                                                                                        <button id="gdygc" type="button" class="am-btn am-btn-default" data-am-button>高电压工程(4@6)</button>
                                                                                                        <button id="zndw" type="button" class="am-btn am-btn-default" alt="电力系统基础、高电压工程、电力电子技术（至少修读过1门）" data-am-button>智能电网(4@7)</button>
                                                                                                        <h5>以下课程任选7~8学分</h5>

                                                                                                        <button id="dlxtzdh" type="button" class="am-btn am-btn-default" data-am-button>电力系统自动化(3@6)</button>
                                                                                                        <button id="dlxtjdbh" type="button" class="am-btn am-btn-default" data-am-button>电力系统继电保护(3@6)</button>
                                                                                                        <button id="dlxtztfx" type="button" class="am-btn am-btn-default" data-am-button>电力系统暂态分析(2@6)</button>
                                                                                                        <button id="szxhclb" type="button" class="am-btn am-btn-default" data-am-button>数字信号处理(B类)(2@5)</button>
                                                                                                        <button id="dqydzcljs" type="button" class="am-btn am-btn-default" data-am-button>电气与电子测量技术(2@6)</button>
                                                                                                        <button id="djx" type="button" class="am-btn am-btn-default" data-am-button>电机学(4@5)</button>
                                                                                                        <button id="djkzjs" type="button" class="am-btn am-btn-default" data-am-button>电机控制技术(3@6)</button>

                                                                                                        <h5> 以下综合实验三选一 </h5>

                                                                                                        <div class="am-btn-group doc-js-btn-2" data-am-button>
                                                                                                                <label class="am-btn am-btn-default" id="dqxtzhsy">
                                                                                                                        <input type="radio" name="options" value="电器系统综合实验" id="option1"> 电器系统综合实验(2@7)
                                                                                                                </label>
                                                                                                                <label class="am-btn am-btn-default" id="dqsbzhsy">
                                                                                                                        <input type="radio" name="options" value="电气设备综合实验" id="option2"> 电气设备综合实验(2@7)
                                                                                                                </label>
                                                                                                                <label class="am-btn am-btn-default" id="dqcdzhsy">
                                                                                                                        <input type="radio" name="options" value="电气传动综合实验" id="option3"> 电气传动综合实验(2@7)
                                                                                                                </label>
                                                                                                        </div>

                                                                                                        <h5> 以下课程设计四选一 </h5>
                                                                                                        <div class="am-btn-group doc-js-btn-3" data-am-button>
                                                                                                                <label class="am-btn am-btn-default" id="jdbhkcsj">
                                                                                                                        <input type="radio" name="options" id="option1"> 继电保护课程设计(2@7)
                                                                                                                </label>
                                                                                                                <label class="am-btn am-btn-default" id="bdzdqbfkcsj">
                                                                                                                        <input type="radio" name="options" id="option2"> 变电站电气部分课程设计(2@7)
                                                                                                                </label>
                                                                                                                <label class="am-btn am-btn-default" id="djddspkzkcsj">
                                                                                                                        <input type="radio" name="options" id="option3"> 电机的DSP控制课程设计(2@7)
                                                                                                                </label>
                                                                                                                <label class="am-btn am-btn-default" id="gyszclxtkc">
                                                                                                                        <input type="radio" name="options" id="option3"> 高压数字测量系统课程(2@7)
                                                                                                                </label>
                                                                                                        </div>

                                                                                                </div>
                                                                                        </div>
                                                                                </div>

                                                                        </div>
                                                                </div>
                                                        </div>
                                                </div>



                                        </div>
                                </div>

                                <div class="am-modal am-modal-no-btn" tabindex="-1" id="doc-modal">
                                        <div class="am-modal-dialog">
                                                <div class="am-modal-hd">选择先修课
                                                        <a href="javascript: void(0)" class="am-close am-close-spin" data-am-modal-close>&times;</a>
                                                </div>
                                                <div class="am-modal-bd">
                                                        你选择的<ins>智能电网</ins>这门课程需要至少修读 <ins>电力系统基础</ins>、<ins>高电压工程</ins>、<ins>电力电子技术</ins>中的一门，请选择你要修哪个呢？

                                                        <div class="am-btn-group" data-am-button>
                                                                <label class="am-btn am-btn-default" id="dlxtjc-select">
                                                                        <input type="checkbox" name="doc-js-btn" > 电力系统基础(4@5) </input>
                                                                </label>
                                                                <label class="am-btn am-btn-default" id="gdygc-select">
                                                                        <input type="checkbox" name="doc-js-btn" > 高电压工程(4@6) </input>
                                                                </label>
                                                                <label class="am-btn am-btn-default" id="dldzjs-select">
                                                                        <input type="checkbox" name="doc-js-btn" > 电力电子技术(4@5) </input>
                                                                </label>
                                                        </div>

                                                        <button type="button" class="am-btn am-btn-primary am-btn-block" id="select-complete">完成</button>
                                                </div>
                                        </div>
                                </div>

                                <!--[if (gte IE 9)|!(IE)]><!-->
                                <script src="http://cdn.amazeui.org/amazeui/2.4.2/js/jquery.min.js"></script>
                                <!--<![endif]-->
                                <script src="http://libs.baidu.com/jquery/1.11.3/jquery.min.js"></script>
                                <!--[if lte IE 8 ]>
                                <script src="http://cdn.staticfile.org/modernizr/2.8.3/modernizr.js"></script>
                                <script src="assets/js/amazeui.ie8polyfill.min.js"></script>
                                <![endif]-->
                                <script src="http://cdn.amazeui.org/amazeui/2.4.2/js/amazeui.min.js"></script>

                                <script type="text/javascript">
                                        var relation = {
                                                "dlydzx" : [],
                                                "dcnl" : [],
                                                "xhyxt": [],
                                                "jsjzc" : [],
                                                "rjgc" : [],
                                                "sjjg" : [],
                                                "txyl" : ["xhyxt"],
                                                "dcxyy" : ["dcnl"],
                                                "jsjxtgc" : ["jsjzc", "rjgc"],
                                                "rgzn" : ["rjgc"],
                                                "sfsjyfx" : ["sjjg"],
                                                "kzll" : ["dlydzx", "xhyxt"],
                                                "dlxtjc" : ["dlydzx"],
                                                "dldzjs" : ["dlydzx"],
                                                "txylb" : ["xhyxt"],
                                                "gdygc" : ["dlydzx", "dcnl"],
                                                "zndw" : []
                                        };

                                        function selected(lessonId) 
                                        {
                                                return $('#'+lessonId).hasClass('am-active');
                                        }

                                        $(document).ready( function() {
                                                for (var i in relation) {
                                                        $("#"+i).on('click', function(i) {
                                                                return function() { afterSelect(i); }
                                                        }(i));

                                                        $("#"+i).on('mouseover', function(i) {
                                                                return function() { highLightRelatedLesson(i); }
                                                        }(i) );

                                                        $("#"+i).on('mouseout', function(i) {
                                                                return function() { restoreRelatedLesson(i); }
                                                        }(i) );
                                                }

                                                $("#zndw").on('click', specialCaseForZndw);
                                                $('#select-complete').on('click', function() {
                                                        var l=["dlxtjc", "gdygc", "dldzjs"];
                                                        if (!selected('dlxtjc-select') && !selected('gdygc-select') && !selected('dldzjs-select'))
                                                                alert('你还一门都没选呢');
                                                        else
                                                                {
                                                                        for (var i in l)
                                                                                if (selected(l[i]+'-select')) {
                                                                                        $('#'+l[i]).click();
                                                                                        console.log(l[i]);
                                                                                }
                                                                                $('#doc-modal').modal('close');
                                                                }
                                                });
                                        });

                                        function specialCaseForZndw(e)
                                        {
                                                if (!selected('zndw') && !selected('dlxtjc') && !selected('gdygc') && !selected('dldzjs')) {
                                                        var l=["dlxtjc", "gdygc", "dldzjs"];
                                                        for (var i in l)
                                                                $('#'+l[i]+'-select').removeClass('am-active');
                                                        $('#doc-modal').modal('open');
                                                        
                                                }
                                        }


                                        function afterSelect(lessonId)
                                        {

                                                if (!$("#"+lessonId).hasClass("am-active")) {
                                                        var c = relation[lessonId];
                                                        console.log(c);
                                                        if (c)
                                                                for (var item in c)
                                                                        {
                                                                                console.log(c[item]);
                                                                                if (! $("#"+c[item]).hasClass('am-active'))
                                                                                        $("#"+c[item]).click();
                                                                                afterSelect(c[item]);
                                                                        }
                                                }
                                        }

                                        function highLightRelatedLesson(lessonId, updateInfo = true)
                                        {
                                                var str = "当前选中课程: "+$("#"+lessonId).text() + "  其依赖以下课程：";
                                                var c= relation[lessonId];
                                                if (c)
                                                        for (var i in c) {
                                                                newId = c[i];
                                                                str += $("#"+newId).text() + " ";
                                                                $("#"+newId).removeClass("am-btn-default");
                                                                $("#"+newId).addClass("am-btn-success");
                                                                highLightRelatedLesson(newId, false);
                                                        }
                                                        str += "." + ($("#"+lessonId).attr('alt') ? "其他信息："+ $("#"+lessonId).attr('alt') : "");
                                                        if (updateInfo)
                                                                $("#info").text(str);
                                        }

                                        function restoreRelatedLesson(lessonId)
                                        {
                                                var c= relation[lessonId];
                                                if (c)
                                                        for (var i in c) {
                                                                newId = c[i];
                                                                $("#"+newId).removeClass("am-btn-success");
                                                                $("#"+newId).addClass("am-btn-default");
                                                                restoreRelatedLesson(newId);
                                                        }
                                        }

                                        function getCredit(lessonId)
                                        {
                                                var obj = $("#"+lessonId).text();
                                                return parseInt(/\d(?=@)/.exec(obj)[0]);
                                        }

                                        function getSemester(lessonId)
                                        {
                                                var obj = $("#"+lessonId).text();
                                                return parseInt(/\d/.exec( /@\d/.exec(obj)[0] ));
                                        }

                                        function updateSelectedInfo()
                                        {
                                                var sum = 0;
                                                for (var i=0; i<8; i++)
                                                $("#semester"+i).empty();
                                                for (var i in relation) 
                                                        if ($("#"+i).hasClass('am-active')) {
                                                                sum += getCredit(i);
                                                                $("#semester"+getSemester(i)).append('<li>'+$("#"+i).text()+'</li>');
                                                        }
                                                        $("#creditSum").text(sum);


                                        }

                                        $(document).ready( function() {
                                                document.addEventListener('click', updateSelectedInfo, false);
                                        });



                                </script>
                        </body>
                </html>
